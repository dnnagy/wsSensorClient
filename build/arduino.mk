UPLOAD_RESET ?= nodemcu
UPLOAD_SPEED ?= 115200
C_COM="$(ESP_ROOT)/tools/xtensa-lx106-elf/bin/xtensa-lx106-elf-gcc" -D__ets__ -DICACHE_FLASH -U__STRICT_ANSI__ "-I$(ESP_ROOT)/tools/sdk/include" "-I$(ESP_ROOT)/tools/sdk/lwip/include" "-I$(ESP_ROOT)/tools/sdk/libc/xtensa-lx106-elf/include" "-I$(BUILD_DIR)/core" -c -w -Os -g -Wpointer-arith -Wno-implicit-function-declaration -Wl,-EL -fno-inline-functions -nostdlib -mlongcalls -mtext-section-literals -falign-functions=4 -MMD -std=gnu99 -ffunction-sections -fdata-sections -DF_CPU=$(F_CPU) -DLWIP_OPEN_SRC   -DARDUINO=10605 -DARDUINO_ESP8266_NODEMCU -DARDUINO_ARCH_ESP8266 -DARDUINO_BOARD=\"ESP8266_NODEMCU\"  -DESP8266 $(C_INCLUDES) 
CPP_COM="$(ESP_ROOT)/tools/xtensa-lx106-elf/bin/xtensa-lx106-elf-g++" -D__ets__ -DICACHE_FLASH -U__STRICT_ANSI__ "-I$(ESP_ROOT)/tools/sdk/include" "-I$(ESP_ROOT)/tools/sdk/lwip/include" "-I$(ESP_ROOT)/tools/sdk/libc/xtensa-lx106-elf/include" "-I$(BUILD_DIR)/core" -c -w -Os -g -mlongcalls -mtext-section-literals -fno-exceptions -fno-rtti -falign-functions=4 -std=c++11 -MMD -ffunction-sections -fdata-sections -DF_CPU=$(F_CPU) -DLWIP_OPEN_SRC   -DARDUINO=10605 -DARDUINO_ESP8266_NODEMCU -DARDUINO_ARCH_ESP8266 -DARDUINO_BOARD=\"ESP8266_NODEMCU\"  -DESP8266 $(C_INCLUDES) 
S_COM="$(ESP_ROOT)/tools/xtensa-lx106-elf/bin/xtensa-lx106-elf-gcc" -D__ets__ -DICACHE_FLASH -U__STRICT_ANSI__ "-I$(ESP_ROOT)/tools/sdk/include" "-I$(ESP_ROOT)/tools/sdk/lwip/include" "-I$(ESP_ROOT)/tools/sdk/libc/xtensa-lx106-elf/include" "-I$(BUILD_DIR)/core" -c -g -x assembler-with-cpp -MMD -mlongcalls -DF_CPU=$(F_CPU) -DLWIP_OPEN_SRC   -DARDUINO=10605 -DARDUINO_ESP8266_NODEMCU -DARDUINO_ARCH_ESP8266 -DARDUINO_BOARD=\"ESP8266_NODEMCU\"  -DESP8266 $(C_INCLUDES) 
AR_COM="$(ESP_ROOT)/tools/xtensa-lx106-elf/bin/xtensa-lx106-elf-ar" cru  "$(BUILD_DIR)/arduino.ar" 
LD_COM="$(ESP_ROOT)/tools/xtensa-lx106-elf/bin/xtensa-lx106-elf-gcc" -g -w -Os -nostdlib -Wl,--no-check-sections -u call_user_start -u _printf_float -u _scanf_float -Wl,-static "-L$(ESP_ROOT)/tools/sdk/lib" "-L$(ESP_ROOT)/tools/sdk/ld" "-L$(ESP_ROOT)/tools/sdk/libc/xtensa-lx106-elf/lib" "-Teagle.flash.4m.ld" -Wl,--gc-sections -Wl,-wrap,system_restart_local -Wl,-wrap,register_chipv6_phy  -o "$(BUILD_DIR)/$(MAIN_NAME).elf" -Wl,--start-group $^ $(BUILD_INFO_OBJ) "$(BUILD_DIR)/arduino.ar" -lhal -lphy -lpp -lnet80211 -llwip_gcc -lwpa -lcrypto -lmain -lwps -laxtls -lespnow -lsmartconfig -lmesh -lwpa2 -lstdc++ -lm -lc -lgcc  -Wl,--end-group  "-L$(BUILD_DIR)"
ELF2BIN_COM="$(ESP_ROOT)/tools/esptool/esptool" -eo "$(ESP_ROOT)/bootloaders/eboot/eboot.elf" -bo "$(BUILD_DIR)/$(MAIN_NAME).bin" -bm $(FLASH_MODE) -bf 40 -bz 4M -bs .text -bp 4096 -ec -eo "$(BUILD_DIR)/$(MAIN_NAME).elf" -bs .irom0.text -bs .text -bs .data -bs .rodata -bc -ec
SIZE_COM="$(ESP_ROOT)/tools/xtensa-lx106-elf/bin/xtensa-lx106-elf-size" -A "$(BUILD_DIR)/$(MAIN_NAME).elf"
MKSPIFFS_COM=$(ESP_ROOT)/tools/mkspiffs/mkspiffs -b 8192 -s 0x2FB000 -c $(FS_DIR) $(FS_IMAGE)
UPLOAD_COM="$(ESP_ROOT)/tools/esptool/esptool" $(UPLOAD_VERB) -cd $(UPLOAD_RESET) -cb $(UPLOAD_SPEED) -cp "$(UPLOAD_PORT)" -ca 0x00000 -cf "$(BUILD_DIR)/$(MAIN_NAME).bin"
FS_UPLOAD_COM="$(ESP_ROOT)/tools/esptool/esptool" $(UPLOAD_VERB) -cd $(UPLOAD_RESET) -cb $(UPLOAD_SPEED) -cp "$(UPLOAD_PORT)" -ca 0x100000 -cf $(FS_IMAGE)
PREBUILD_COM=mkdir -p $(BUILD_DIR)/core && echo "\#define ARDUINO_ESP8266_GIT_VER 0x"`git --git-dir $(ESP_ROOT)/.git rev-parse --short=8 HEAD 2>/dev/null || echo ffffffff` >$(BUILD_DIR)/core/core_version.h
